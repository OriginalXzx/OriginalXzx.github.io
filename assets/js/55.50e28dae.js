(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{470:function(t,s,a){"use strict";a.r(s);var e=a(1),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[t._v("Spring的xml配置虽然比较繁琐，但是能读懂xml配置文件还是很重要的，尤其是对于一些老系统的维护，几乎不可避免要面对xml配置文件的问题。现在我们就从默认的xml文件头说起。")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/beans"')]),t._v("\n  xmlns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.w3.org/2001/XMLSchema-instance"')]),t._v("\n  xmlns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/context"')]),t._v("\n  xsi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("schemaLocation"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans \n    http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spring"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xsd\n   http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("context \n    http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spring"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('xsd"'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("scan base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cn.edu.buaa"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("首先，需要了解的是xml本身的一些知识，这些知识和spring无关。")]),t._v(" "),a("h2",{attrs:{id:"命名空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名空间"}},[t._v("#")]),t._v(" 命名空间")]),t._v(" "),a("p",[t._v("命名空间这个概念，和c++，java等都是一样的，无非是想解决重名的东西的具体归属问题，就好像你有Student.class，我也有Student.class，具体用的是哪个Student.class，只要带上前面的包名（相当于命名空间），就可以知道到底是谁的Student。")]),t._v(" "),a("p",[t._v("xml的命名空间用xmlns定义，一读便知是XML NameSpace的字母缩写。")]),t._v(" "),a("blockquote",[a("p",[t._v('语法：xmlns:[prefix]="[url of name]"')])]),t._v(" "),a("p",[t._v("其中，url of name是完整命名空间，而prefix是命名空间的别名。")]),t._v(" "),a("h2",{attrs:{id:"头解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#头解析"}},[t._v("#")]),t._v(" 头解析")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('xmlns="http://www.springframework.org/schema/beans"')]),t._v("：声明xml文件默认的命名空间，其后凡是没有使用命名空间的标签，全是来自这个命名空间；")]),t._v(" "),a("li",[a("code",[t._v('xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"')]),t._v("：引入XMLSchema-instance命名空间，并简称为xsi，显然也是取其首字母组成的；")]),t._v(" "),a("li",[a("code",[t._v('xmlns:context="http://www.springframework.org/schema/context"')]),t._v("：同上，引入一个context命名空间，简称为context；")]),t._v(" "),a("li",[t._v("最后一个定义比较长：")])]),t._v(" "),a("blockquote",[a("p",[t._v('xsi:schemaLocation="http://www.springframework.org/schema/beans '),a("br"),t._v("\nhttp://www.springframework.org/schema/beans/spring-beans.xsd "),a("br"),t._v("\nhttp://www.springframework.org/schema/context  "),a("br"),t._v('\nhttp://www.springframework.org/schema/context/spring-context.xsd"')])]),t._v(" "),a("p",[t._v("首先"),a("code",[t._v("xsi:schemaLocation")]),t._v("代表刚刚引入的"),a("code",[t._v("XMLSchema-instance")]),t._v("（简称xsi）中的schemaLocation属性，它的作用是将多个<命名空间，模式位置>对对应起来，其中命名空间和模式位置之间使用空白符分隔。所以最后一个定义的意思就是，命名空间"),a("code",[t._v("http://www.springframework.org/schema/beans")]),t._v("用的是"),a("code",[t._v("http://www.springframework.org/schema/beans/spring-beans.xsd")]),t._v("模式，而"),a("code",[t._v("http://www.springframework.org/schema/context")]),t._v("用的是"),a("code",[t._v("http://www.springframework.org/schema/context/spring-context.xsd")]),t._v("模式。")]),t._v(" "),a("p",[t._v("如果还不懂，可以去 "),a("em",[t._v("http://www.springframework.org/schema/beans")]),t._v("网站下看看，有"),a("code",[t._v("spring-beans-2.0.xsd")]),t._v("、"),a("code",[t._v("spring-beans-2.5.xsd")]),t._v("、"),a("code",[t._v("spring-beans-3.0.xsd")]),t._v("、"),a("code",[t._v("spring-beans-3.1.xsd")]),t._v("、"),a("code",[t._v("spring-beans-4.3.xsd")]),t._v("、"),a("code",[t._v("spring-beans.xsd")]),t._v("等多种模式，而这里使用的是"),a("code",[t._v("spring-beans.xsd")]),t._v("这一模式，"),a("code",[t._v("spring-context.xsd")]),t._v("同理。")]),t._v(" "),a("h2",{attrs:{id:"模式内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式内容"}},[t._v("#")]),t._v(" 模式内容")]),t._v(" "),a("p",[t._v("具体使用的"),a("code",[t._v("spring-beans.xsd")]),t._v("和"),a("code",[t._v("spring-context.xsd")]),t._v("有什么用呢？")]),t._v(" "),a("p",[t._v("可以去http://www.springframework.org/schema/beans/spring-beans.xsd查看spring-beans.xsd的内容，其中定义了很多属性，比如"),a("code",[t._v('<xsd:element name="beans">')]),t._v("，这意味着xml中可以使用"),a("code",[t._v("<beans>")]),t._v("标签。"),a("strong",[t._v("至此，xml文件中终于可以使用spring的东西了！")])]),t._v(" "),a("p",[t._v("spring的所有东西几乎都是可以从这些定义文件里面找出来的。比如beans的"),a("code",[t._v("<xsd:documentation>")]),t._v("属性向我们展示了beans的文档说明：The default 'lazy-init' value; see the documentation for the 'lazy-init' attribute of the "),a("code",[t._v("<bean>")]),t._v(" element.。beans下还通过"),a("code",[t._v('<xsd:attribute name="default-lazy-init" default="false" type="xsd:boolean">')]),t._v("定义了一个default-lazy-init属性，类型是boolean，默认值是false，它的文档解释为The default 'lazy-init' value; see the documentation for the 'lazy-init' attribute of the "),a("code",[t._v("<bean>")]),t._v(" element.，告诉我们想了解详情，具体参见bean下的lazy-init。继续挖掘，找到"),a("code",[t._v('<xsd:attribute name="lazy-init" default="default" type="defaultable-boolean">')]),t._v('，终于通过其doc：Indicates whether or not this bean is to be lazily initialized. If false, it will be instantiated on startup by bean factories that perform eager initialization of singletons. The default is "false". Note: This attribute will not be inherited by child bean definitions. Hence, it needs to be specified per concrete bean definition.，知道了作用就是是否将这个bean设置为迟加载，如果不是，就在启动的时候通过bean工厂初始化为一个单例，且这个属性的设置不会被子bean继承，因此每个子bean需要设置自己所需要的值。')]),t._v(" "),a("p",[t._v("至此，"),a("code",[t._v('<context:component-scan base-package="cn.edu.buaa" />')]),t._v("的意义也不难理解了。这是一个context命名空间下的component-scan的属性。而之前的"),a("code",[t._v("xsi:schemaLocation")]),t._v("告诉我们可以在"),a("code",[t._v("http://www.springframework.org/schema/context/spring-context.xsd")]),t._v("里找到它的定义。")]),t._v(" "),a("p",[t._v("所以说，这些模式的文件内容其实相当于成为了一个非常有用的wiki。")])])}),[],!1,null,null,null);s.default=r.exports}}]);